<div class="chat-container bg-white rounded-lg shadow-md flex flex-col h-96">
  <!-- Messages Area -->
  <div #messagesContainer  class="messages-container flex-1 overflow-y-auto p-4 space-y-3">
    <div *ngFor="let msg of messages" class="message-wrapper">
      <!-- Others' Messages (Left-aligned) -->
      <div *ngIf="msg.senderId !== userId" class="other-message flex items-start gap-2">
        <div class="message-content max-w-xs">
          <div class="sender-name text-sm text-gray-600 font-medium mb-1">
            {{msg.senderUsername}}
          </div>
          <div class="message-bubble bg-gray-100 text-gray-800 px-4 py-2 rounded-lg rounded-tl-none">
            {{msg.message}}
          </div>
          <div class="timestamp text-xs text-gray-400 mt-1">
            {{msg.timestamp | date:'shortTime'}}
          </div>
        </div>
      </div>

      <!-- Your Messages (Right-aligned) -->
      <div *ngIf="msg.senderId === userId" class="my-message flex justify-end">
        <div class="message-content max-w-xs">
          <div class="message-bubble bg-blue-500 text-white px-4 py-2 rounded-lg rounded-tr-none">
            {{msg.message}}
          </div>
          <div class="timestamp text-xs text-gray-400 mt-1 text-right">
            {{msg.timestamp | date:'shortTime'}}
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Input Area -->
  <div class="input-area border-t border-gray-200 p-3">
    <form [formGroup]="chatForm" (ngSubmit)="sendMessage()" class="flex gap-2">
      <input
        formControlName="message"
        class="flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-blue-300"
        placeholder="Type your message..."
      />
      <button
        type="submit"
        class="bg-blue-500 hover:bg-blue-600 text-white font-medium px-4 py-2 rounded-lg transition-colors"
        [disabled]="chatForm.invalid"
      >
        Send
      </button>
    </form>
  </div>
</div>